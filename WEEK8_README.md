 <aside>
ğŸ’¡ ì•„ë˜ ëª…ì„¸ë¥¼ ì˜ ì½ì–´ë³´ê³ , ì„œë²„ë¥¼ êµ¬í˜„í•©ë‹ˆë‹¤.

</aside>

## Description

- **`ì½˜ì„œíŠ¸ ì˜ˆì•½ ì„œë¹„ìŠ¤`**ë¥¼ êµ¬í˜„í•´ ë´…ë‹ˆë‹¤.
- ëŒ€ê¸°ì—´ ì‹œìŠ¤í…œì„ êµ¬ì¶•í•˜ê³ , ì˜ˆì•½ ì„œë¹„ìŠ¤ëŠ” ì‘ì—…ê°€ëŠ¥í•œ ìœ ì €ë§Œ ìˆ˜í–‰í•  ìˆ˜ ìˆë„ë¡ í•´ì•¼í•©ë‹ˆë‹¤.
- ì‚¬ìš©ìëŠ” ì¢Œì„ì˜ˆì•½ ì‹œì— ë¯¸ë¦¬ ì¶©ì „í•œ ì”ì•¡ì„ ì´ìš©í•©ë‹ˆë‹¤.
- ì¢Œì„ ì˜ˆì•½ ìš”ì²­ì‹œì—, ê²°ì œê°€ ì´ë£¨ì–´ì§€ì§€ ì•Šë”ë¼ë„ ì¼ì • ì‹œê°„ë™ì•ˆ ë‹¤ë¥¸ ìœ ì €ê°€ í•´ë‹¹ ì¢Œì„ì— ì ‘ê·¼í•  ìˆ˜ ì—†ë„ë¡ í•©ë‹ˆë‹¤.

<aside>
ğŸ—“ï¸ **Weekly Schedule Summary: ì´ë²ˆ ì±•í„°ì˜ ì£¼ê°„ ì¼ì • (ê¸ˆìš”ì¼ ì˜¤ì „ 10ì‹œê¹Œì§€ ì œì¶œ)**

</aside>

### 8ì£¼ì°¨ ê³¼ì œ

### **`STEP 15_ê¸°ë³¸`**

- ë‚˜ì˜ ì‹œë‚˜ë¦¬ì˜¤ì—ì„œ ìˆ˜í–‰í•˜ëŠ” ì¿¼ë¦¬ë“¤ì„ ìˆ˜ì§‘í•´ë³´ê³ , í•„ìš”í•˜ë‹¤ê³  íŒë‹¨ë˜ëŠ” ì¸ë±ìŠ¤ë¥¼ ì¶”ê°€í•˜ê³  ì¿¼ë¦¬ì˜ ì„±ëŠ¥ê°œì„  ì •ë„ë¥¼ ì‘ì„±í•˜ì—¬ ì œì¶œ
    - ìì£¼ ì¡°íšŒí•˜ëŠ” ì¿¼ë¦¬, ë³µì¡í•œ ì¿¼ë¦¬ íŒŒì•…
    - Index ì¶”ê°€ ì „í›„ Explain, ì‹¤í–‰ì‹œê°„ ë“± ë¹„êµ

### **`STEP 16_ì‹¬í™”`**

- ë‚´ê°€ ê°œë°œí•œ ê¸°ëŠ¥ì˜ íŠ¸ëœì­ì…˜ ë²”ìœ„ì— ëŒ€í•´ ì´í•´í•˜ê³ , ì„œë¹„ìŠ¤ì˜ ê·œëª¨ê°€ í™•ì¥ëœë‹¤ë©´ ì„œë¹„ìŠ¤ë“¤ì„ ì–´ë–»ê²Œ ë¶„ë¦¬í•˜ê³  ê·¸ ë¶„ë¦¬ì— ë”°ë¥¸ íŠ¸ëœì­ì…˜ ì²˜ë¦¬ì˜ í•œê³„ì™€ í•´ê²°ë°©ì•ˆì— ëŒ€í•œ ì„œë¹„ìŠ¤ì„¤ê³„ ë¬¸ì„œ ì‘ì„±
- ì‹¤ì‹œê°„ ì£¼ë¬¸, ì¢Œì„ì˜ˆì•½ ì •ë³´ë¥¼ ë°ì´í„° í”Œë«í¼ì— ì „ë‹¬í•˜ê±°ë‚˜ ì´ë ¥ ë°ì´í„°ë¥¼ ì €ì¥ ( ì™¸ë¶€ API í˜¸ì¶œ, ë©”ì„¸ì§€ ë°œí–‰ ë“± ) í•˜ëŠ” ìš”êµ¬ì‚¬í•­ ë“±ì„ ê¸°ì¡´ ë¡œì§ì— ì¶”ê°€í•´ ë³´ê³  ê¸°ì¡´ ë¡œì§ì— ì˜í–¥ ì—†ì´ ë¶€ê°€ ê¸°ëŠ¥ì„ ì œê³µ

# STEP 15

## DB (MySQL) & ì¸ë±ì‹±

https://velog.io/@saruru/123

# STEP 16
## íŠ¸ëœì­ì…˜ ë²”ìœ„ ì´í•´ & íŠ¸ëœì­ì…˜ ë¶„ë¦¬ ë° í•´ê²°ë°©ì•ˆ

### ê°œë°œë°©ì‹ì˜ ë³€í™”ì™€ íŠ¸ëœì­ì…˜ ë²”ìœ„ì— ëŒ€í•œ ê³ ë¯¼ì˜ í•„ìš”ì„± ëŒ€ë‘
íŠ¸ëœì­ì…˜ ë²”ìœ„ì™€ í™•ì¥ì„±ì— ëŒ€í•´ ìƒê°í•´ë³´ë©´, ì‘ì€ ì„œë¹„ìŠ¤ì¼ ë•ŒëŠ” ë‹¨ì¼ íŠ¸ëœì­ì…˜ ì•ˆì—ì„œ ëª¨ë“  ì²˜ë¦¬ë¥¼ ëë‚¼ ìˆ˜ ìˆì–´ì„œ ì„¤ê³„ê°€ ë¹„êµì  ë‹¨ìˆœí•˜ë‹¤. 
í•˜ì§€ë§Œ ì„œë¹„ìŠ¤ ê·œëª¨ê°€ ì»¤ì§€ê³  ë¶„ì‚° í™˜ê²½ìœ¼ë¡œ í™•ì¥ë˜ë©´, íŠ¸ëœì­ì…˜ ì²˜ë¦¬ì˜ ì¼ê´€ì„±ê³¼ ì•ˆì •ì„±ì„ ìœ ì§€í•˜ëŠ” ê²Œ ë” ì–´ë ¤ì›Œì§„ë‹¤. 
íŠ¹íˆ, ì—¬ëŸ¬ ì„œë¹„ìŠ¤ê°€ í•¨ê»˜ ì‘ë™í•´ì•¼ í•˜ëŠ” ê²½ìš°ì—” ê°œë³„ ì„œë¹„ìŠ¤ì˜ íŠ¸ëœì­ì…˜ ì²˜ë¦¬ ë°©ì‹ì— ëŒ€í•œ ê¹Šì€ ì´í•´ê°€ í•„ìš”í•˜ë‹¤.

ê¸°ì¡´ ì „í†µì ì¸ ê°œë°œ ë°©ì‹ì´ì˜€ë˜ ëª¨ë†€ë¦¬ì‹ ì•„í‚¤í…ì²˜ëŠ” ë‹¨ì¼ ì• í”Œë¦¬ì¼€ì´ì…˜ìœ¼ë¡œ ëª¨ë“  ê¸°ëŠ¥ì„ í¬í•¨í•˜ê³  ìˆì–´ ê°œë°œ ë° ë°°í¬ ì´ˆê¸°ì—ëŠ” ê´€ë¦¬ê°€ ë‹¨ìˆœí•˜ê³  ì¼ê´€ì„±ì„ ìœ ì§€í•˜ê¸° ì¢‹ë‹¤. 
ê·¸ëŸ¬ë‚˜ ê·œëª¨ê°€ ì»¤ì§ˆìˆ˜ë¡ ë‹¨ì¼ ì½”ë“œë² ì´ìŠ¤ê°€ ë¹„ëŒ€í•´ì ¸ ìˆ˜ì • ë° ë°°í¬ ì‹œ ë³µì¡ì„±ì´ í¬ê²Œ ì¦ê°€í•˜ê³ , ì„±ëŠ¥ìƒì˜ í•œê³„ì™€ ì¥ì•  ëŒ€ì‘ì´ ì–´ë ¤ì›Œì§„ë‹¤.
íŠ¹íˆ ì—¬ëŸ¬ íŒ€ì´ ë™ì‹œì— ì‘ì—…í•  ë•Œ ì½”ë“œ ê°„ì˜ ì¶©ëŒì´ ë¹ˆë²ˆí•´ì§€ê³ , ì‘ì€ ë³€ê²½ ì‚¬í•­ì—ë„ ì „ì²´ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ë‹¤ì‹œ ë°°í¬í•´ì•¼ í•˜ëŠ” ë¹„íš¨ìœ¨ì´ ë°œìƒí•œë‹¤.

ì´ëŸ° í•œê³„ë¡œ ì¸í•´ **ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ ì•„í‚¤í…ì²˜(MSA)**ê°€ ë“±ì¥í–ˆë‹¤. 
MSAëŠ” ì„œë¹„ìŠ¤ë³„ë¡œ ë…ë¦½ì ìœ¼ë¡œ ê°œë°œ ë° ë°°í¬í•  ìˆ˜ ìˆë„ë¡ êµ¬ì„±í•˜ì—¬, ê¸°ëŠ¥ì„ ê°ê°ì˜ ëª¨ë“ˆë¡œ ë¶„ë¦¬í•œë‹¤. 
ì´ë¡œ ì¸í•´ ì„œë¹„ìŠ¤ë§ˆë‹¤ ë…ë¦½ì ìœ¼ë¡œ ìš´ì˜ë˜ë©°, í™•ì¥ì„±, ìœ ì—°ì„±, ì¥ì•  ê²©ë¦¬ì—ì„œ ëª¨ë†€ë¦¬ì‹ì— ë¹„í•´ ìœ ë¦¬í•˜ë‹¤.


### MSAì™€ ëª¨ë†€ë¦¬ì‹ ì•„í‚¤í…ì²˜ ë¹„êµ

| íŠ¹ì§•               | MSA (Microservices Architecture)                                              | ëª¨ë†€ë¦¬ì‹ ì•„í‚¤í…ì²˜ (Monolithic Architecture)                        |
|--------------------|------------------------------------------------------------------------------|-------------------------------------------------------------------|
| **êµ¬ì„± ë°©ì‹**      | ê¸°ëŠ¥ë³„ë¡œ ë…ë¦½ëœ ì—¬ëŸ¬ ì„œë¹„ìŠ¤ë¡œ êµ¬ì„±                                             | í•˜ë‚˜ì˜ í° ì• í”Œë¦¬ì¼€ì´ì…˜ìœ¼ë¡œ êµ¬ì„±                                      |
| **ê°œë°œ ë° ë°°í¬**   | ê°œë³„ ì„œë¹„ìŠ¤ ë‹¨ìœ„ë¡œ ë…ë¦½ì ìœ¼ë¡œ ê°œë°œ ë° ë°°í¬ ê°€ëŠ¥                                  | ì „ì²´ ì‹œìŠ¤í…œì„ í•˜ë‚˜ì˜ ë°°í¬ ë‹¨ìœ„ë¡œ ë¬¶ì–´ ë°°í¬í•´ì•¼ í•¨                       |
| **í™•ì¥ì„±**         | íŠ¹ì • ì„œë¹„ìŠ¤ë§Œ ê°œë³„ì ìœ¼ë¡œ í™•ì¥ ê°€ëŠ¥                                               | ì „ì²´ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ í•¨ê»˜ í™•ì¥í•´ì•¼ í•˜ë¯€ë¡œ ë¹„íš¨ìœ¨ì                        |
| **ìœ ì§€ë³´ìˆ˜**       | ê° ì„œë¹„ìŠ¤ê°€ ë…ë¦½ì ì´ë¼ ì¼ë¶€ ë³€ê²½ì´ ë‹¤ë¥¸ ì„œë¹„ìŠ¤ì— ë¯¸ì¹˜ëŠ” ì˜í–¥ì´ ì ìŒ                   | ë³€ê²½ ì‹œ ì „ì²´ ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ì˜í–¥ ë²”ìœ„ê°€ í¼                             |
| **ê¸°ìˆ  ìŠ¤íƒ**      | ì„œë¹„ìŠ¤ë§ˆë‹¤ ë‹¤ë¥¸ ê¸°ìˆ  ìŠ¤íƒ ì‚¬ìš© ê°€ëŠ¥                                              | ì¼ê´€ëœ ê¸°ìˆ  ìŠ¤íƒì„ ì‚¬ìš©í•´ì•¼ í•¨                                       |
| **ë°ì´í„° ì €ì¥ì†Œ**  | ì„œë¹„ìŠ¤ë§ˆë‹¤ ê°œë³„ ë°ì´í„° ì €ì¥ì†Œë¥¼ ê°€ì§ˆ ìˆ˜ ìˆìŒ                                      | ë‹¨ì¼ ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²½ìš°ê°€ ë§ìŒ                               |
| **ì¥ì•  ê²©ë¦¬**      | íŠ¹ì • ì„œë¹„ìŠ¤ ì¥ì•  ì‹œ ë‹¤ë¥¸ ì„œë¹„ìŠ¤ëŠ” ì˜í–¥ ì—†ì´ ìš´ì˜ ê°€ëŠ¥                              | í•œ ë¶€ë¶„ì˜ ì¥ì• ê°€ ì „ì²´ ì‹œìŠ¤í…œìœ¼ë¡œ í™•ì‚°ë  ê°€ëŠ¥ì„±ì´ í¼                     |
| **ì˜ì¡´ì„± ê´€ë¦¬**    | ì„œë¹„ìŠ¤ ê°„ì˜ APIë¡œ í†µì‹ í•˜ë¯€ë¡œ ëŠìŠ¨í•œ ê²°í•© ê°€ëŠ¥                                    | ì½”ë“œ ë ˆë²¨ì—ì„œ ëª¨ë“ˆ ê°„ ì˜ì¡´ì„±ì´ ë†’ìŒ                                  |
| **ë³µì¡ë„**         | ì„œë¹„ìŠ¤ ë¶„ë¦¬ê°€ ì´ë£¨ì–´ì§€ë©´ ê° ì„œë¹„ìŠ¤ê°€ ë‹¨ìˆœí•´ì§€ì§€ë§Œ ì „ì²´ ì‹œìŠ¤í…œ ê´€ë¦¬ê°€ ë³µì¡í•´ì§ˆ ìˆ˜ ìˆìŒ | ì½”ë“œê°€ í•œ ê³³ì— ìˆì–´ ê´€ë¦¬ê°€ ë‹¨ìˆœí•˜ì§€ë§Œ ì• í”Œë¦¬ì¼€ì´ì…˜ ìì²´ëŠ” ë³µì¡í•´ì§ˆ ìˆ˜ ìˆìŒ |
| **ì„±ëŠ¥**           | ë„¤íŠ¸ì›Œí¬ í†µì‹ ì´ í•„ìš”í•´ ì˜¤ë²„í—¤ë“œ ë°œìƒ ê°€ëŠ¥                                         | ë‚´ë¶€ í˜¸ì¶œë¡œ ìƒëŒ€ì ìœ¼ë¡œ ë¹ ë¥¸ ì„±ëŠ¥                                      |


#### MSAì—ì„œ íŠ¸ëœì­ì…˜ ë²”ìœ„ ì´í•´ ë° íŠ¸ëœì­ì…˜ ë¶„ë¦¬ì˜ í•„ìš”ì„±
MSAë¡œ ì „í™˜í•˜ë©´ì„œ ê° ì„œë¹„ìŠ¤ê°€ ë…ë¦½ì ìœ¼ë¡œ ë™ì‘í•˜ê²Œ ë˜ë¯€ë¡œ, ë¶„ì‚°ëœ ì—¬ëŸ¬ ì„œë¹„ìŠ¤ê°€ í•¨ê»˜ ë°ì´í„°ë¥¼ ì²˜ë¦¬í•  ë•Œ íŠ¸ëœì­ì…˜ ê´€ë¦¬ê°€ ë³µì¡í•´ì§„ë‹¤. 
ëª¨ë†€ë¦¬ì‹ì—ì„œëŠ” í•˜ë‚˜ì˜ íŠ¸ëœì­ì…˜ ë²”ìœ„ ë‚´ì—ì„œ ëª¨ë“  ì²˜ë¦¬ë¥¼ ì¼ê´€ì„± ìˆê²Œ ìœ ì§€í•  ìˆ˜ ìˆì—ˆì§€ë§Œ, MSAì—ì„œëŠ” í•˜ë‚˜ì˜ ì„œë¹„ìŠ¤ì—ì„œ íŠ¸ëœì­ì…˜ì„ ì¢…ë£Œí•œ í›„ ë‹¤ë¥¸ ì„œë¹„ìŠ¤ë¡œ ë°ì´í„°ë¥¼ ë„˜ê²¨ì•¼ í•˜ë¯€ë¡œ ê°•í•œ ì¼ê´€ì„±ì„ ìœ ì§€í•˜ê¸° ì–´ë µë‹¤. 
ì´ ë•Œë¬¸ì— ê° ì„œë¹„ìŠ¤ì˜ íŠ¸ëœì­ì…˜ì„ ë³„ë„ë¡œ ê´€ë¦¬í•˜ë©´ì„œë„ ì „ì²´ íë¦„ì˜ ì¼ê´€ì„±ì„ ìœ ì§€í•  ë°©ë²•ì´ í•„ìš”í•˜ë‹¤.

#### íŠ¸ëœì­ì…˜ ê´€ë¦¬ì™€ í•´ê²° ë°©ì•ˆ
ì„œë¹„ìŠ¤ë¥¼ ë¶„ë¦¬í•œë‹¤ëŠ” ê²ƒì€ ê¸°ë³¸ì ìœ¼ë¡œ ì„œë¹„ìŠ¤ë§ˆë‹¤ ê³ ìœ í•œ íŠ¸ëœì­ì…˜ ê´€ë¦¬ê°€ í•„ìš”í•˜ë‹¤ëŠ” ê²ƒì„ ì˜ë¯¸í•œë‹¤. 
ê° ì„œë¹„ìŠ¤ê°€ ë…ë¦½ì ìœ¼ë¡œ íŠ¸ëœì­ì…˜ì„ ê´€ë¦¬í•˜ê²Œ ë˜ë©´ì„œ ê¸°ì¡´ì˜ ê°•í•œ ì¼ê´€ì„± ë³´ë‹¤ëŠ” ìµœì¢…ì  ì¼ê´€ì„±ì„ ì§€í–¥í•˜ëŠ” íŒ¨í„´ì´ ìœ ìš©í•  ìˆ˜ ìˆë‹¤. 
MSA í™˜ê²½ì—ì„œëŠ” SAGA íŒ¨í„´ì´ë‚˜ ì•„ì›ƒë°•ìŠ¤íŒ¨í„´, ì´ë²¤íŠ¸ ê¸°ë°˜ì˜ ì•„í‚¤í…ì²˜ ë“±ìœ¼ë¡œ ì²˜ë¦¬ê°€ ê°€ëŠ¥í•˜ë‹¤.

## SAGA íŒ¨í„´

### ì •ì˜
SAGA íŒ¨í„´ì€ **ë¶„ì‚° íŠ¸ëœì­ì…˜ì„ ê´€ë¦¬í•˜ê¸° ìœ„í•œ íŒ¨í„´**ìœ¼ë¡œ, ê° ì„œë¹„ìŠ¤ê°€ íŠ¸ëœì­ì…˜ì˜ ë…ë¦½ì ì¸ ë‹¨ìœ„ë¡œì„œ ë™ì‘í•˜ë„ë¡ í•œë‹¤. ê° ì„œë¹„ìŠ¤ëŠ” ë…ë¦½ì ìœ¼ë¡œ íŠ¸ëœì­ì…˜ì„ ìˆ˜í–‰í•˜ë©°, ì „ì²´ íŠ¸ëœì­ì…˜ì˜ ì¼ê´€ì„±ì€ ê° ì„œë¹„ìŠ¤ê°€ ìˆœì°¨ì ìœ¼ë¡œ ì„±ê³µí•´ì•¼ ìœ ì§€ëœë‹¤. íŠ¸ëœì­ì…˜ ë‹¨ê³„ì—ì„œ ì˜¤ë¥˜ê°€ ë°œìƒí•˜ë©´ ë³´ìƒ íŠ¸ëœì­ì…˜ì„ ì‹¤í–‰í•´ ì´ì „ ìƒíƒœë¡œ ë³µêµ¬í•œë‹¤.

### ì¥ì 
- **ë…ë¦½ì„±**: ê° ì„œë¹„ìŠ¤ê°€ ìì²´ íŠ¸ëœì­ì…˜ì„ ê´€ë¦¬í•´ ì„œë¹„ìŠ¤ ê°„ ê²°í•©ë„ê°€ ë‚®ìŒ.
- **ìœ ì—°í•œ ë³µêµ¬**: ì˜¤ë¥˜ ì‹œ ë³´ìƒ íŠ¸ëœì­ì…˜ìœ¼ë¡œ ì‹œìŠ¤í…œì„ ì‰½ê²Œ ë³µêµ¬ ê°€ëŠ¥.
- **ìµœì¢… ì¼ê´€ì„± ìœ ì§€**: ë¶„ì‚° ì‹œìŠ¤í…œ í™˜ê²½ì—ì„œ ìµœì¢… ì¼ê´€ì„±ì„ ì œê³µí•˜ì—¬ í™•ì¥ì„±ì— ìœ ë¦¬.

### ë‹¨ì 
- **ë³µì¡ì„± ì¦ê°€**: ì„œë¹„ìŠ¤ì™€ ë³´ìƒ íŠ¸ëœì­ì…˜ ê°„ì˜ ê´€ë¦¬ ë¡œì§ì´ ë³µì¡í•´ì§.
- **ì„±ëŠ¥ ì´ìŠˆ**: íŠ¸ëœì­ì…˜ ë‹¨ê³„ë§ˆë‹¤ ìˆœì°¨ì ìœ¼ë¡œ ì‹¤í–‰ë˜ë¯€ë¡œ ì§€ì—° ì‹œê°„ì´ ë°œìƒí•  ìˆ˜ ìˆìŒ.
- **ì¶”ì  ì–´ë ¤ì›€**: íŠ¸ëœì­ì…˜ ìƒíƒœë¥¼ ì¶”ì í•˜ê¸° ì–´ë ¤ì›Œ ë¡œê¹…ê³¼ ëª¨ë‹ˆí„°ë§ì´ í•„ìˆ˜.

---

## OUTBOX íŒ¨í„´

### ì •ì˜
ì•„ì›ƒë°•ìŠ¤(Outbox) íŒ¨í„´ì€ **íŠ¸ëœì­ì…˜ ì¼ê´€ì„±ì„ ìœ ì§€í•˜ë©´ì„œ ë¹„ë™ê¸° ì´ë²¤íŠ¸ë¥¼ ì™¸ë¶€ì— ì „ë‹¬**í•˜ê¸° ìœ„í•œ íŒ¨í„´ì´ë‹¤. ì•„ì›ƒë°•ìŠ¤ í…Œì´ë¸”ì— ì´ë²¤íŠ¸ë¥¼ ì €ì¥í•˜ê³ , ì´í›„ì— ì´ë¥¼ ì½ì–´ ì´ë²¤íŠ¸ ë²„ìŠ¤ë¡œ ì „ë‹¬í•œë‹¤. ì•„ì›ƒë°•ìŠ¤ í…Œì´ë¸”ê³¼ ì£¼ìš” ë°ì´í„°ëŠ” í•˜ë‚˜ì˜ íŠ¸ëœì­ì…˜ì—ì„œ ì²˜ë¦¬ë˜ë¯€ë¡œ, ë°ì´í„°ë² ì´ìŠ¤ ì¼ê´€ì„±ì„ ë³´ì¥í•  ìˆ˜ ìˆë‹¤.

### ì¥ì 
- **ë°ì´í„° ì¼ê´€ì„± ë³´ì¥**: ë°ì´í„°ì™€ ì´ë²¤íŠ¸ê°€ í•¨ê»˜ íŠ¸ëœì­ì…˜ìœ¼ë¡œ ì²˜ë¦¬ë˜ì–´ ì¼ê´€ì„± ìœ ì§€.
- **ìœ ì‹¤ ë°©ì§€**: ì•„ì›ƒë°•ìŠ¤ í…Œì´ë¸”ì— ê¸°ë¡ëœ ì´ë²¤íŠ¸ë¥¼ ì¬ì‹œë„í•  ìˆ˜ ìˆì–´ ì‹ ë¢°ì„± í–¥ìƒ.
- **ì™¸ë¶€ ì‹œìŠ¤í…œê³¼ì˜ ì•ˆì „í•œ í†µí•©**: ì™¸ë¶€ ì„œë¹„ìŠ¤ì™€ì˜ ë¹„ë™ê¸° í†µì‹ ì„ ì•ˆì „í•˜ê²Œ ìˆ˜í–‰ ê°€ëŠ¥.

### ë‹¨ì 
- **ê´€ë¦¬ ë³µì¡ì„±**: ì•„ì›ƒë°•ìŠ¤ í…Œì´ë¸” ê´€ë¦¬ ë° ì •ë¦¬ê°€ í•„ìš”í•´ ê´€ë¦¬ ë³µì¡ì„± ì¦ê°€.
- **ì„±ëŠ¥ ì €í•˜**: íŠ¸ëœì­ì…˜ ë‚´ ë°ì´í„° ì €ì¥ê³¼ ì´ë²¤íŠ¸ ê¸°ë¡ì´ ë™ì‹œì— ì´ë£¨ì–´ì ¸ ì„±ëŠ¥ì— ì˜í–¥ì„ ì¤„ ìˆ˜ ìˆìŒ.

---

## ì´ë²¤íŠ¸ ê¸°ë°˜ ì•„í‚¤í…ì²˜

### ì •ì˜
ì´ë²¤íŠ¸ ê¸°ë°˜ ì•„í‚¤í…ì²˜ëŠ” **Springì˜ ApplicationEventPublisherì™€ @EventListenerë¥¼ í™œìš©í•˜ì—¬ ì´ë²¤íŠ¸ë¥¼ ë°œìƒì‹œí‚¤ê³  ì´ë¥¼ ìˆ˜ì‹ **í•˜ì—¬ ì²˜ë¦¬í•˜ëŠ” ë°©ì‹ì´ë‹¤. ì´ë¥¼ í†µí•´ ë¹„ë™ê¸° ì‘ì—…ì„ ì²˜ë¦¬í•˜ë©°, ê° ëª¨ë“ˆ ê°„ ê²°í•©ë„ë¥¼ ë‚®ì¶”ì–´ ë…ë¦½ì„±ì„ ìœ ì§€í•  ìˆ˜ ìˆë‹¤.

### íŠ¹ì§• ë° ì¥ì 
- **ë¹„ë™ê¸° ì²˜ë¦¬**: ì´ë²¤íŠ¸ ë°œí–‰ í›„ ë¦¬ìŠ¤ë„ˆì—ì„œ ë¹„ë™ê¸°ë¡œ ì‘ì—…ì„ ì²˜ë¦¬í•˜ì—¬ ì„±ëŠ¥ ìµœì í™”.
- **ëª¨ë“ˆ ê°„ ê²°í•©ë„ ê°ì†Œ**: ì´ë²¤íŠ¸ ë°œí–‰ìì™€ ë¦¬ìŠ¤ë„ˆ ê°„ ê²°í•©ë„ê°€ ë‚®ì•„ ìœ ì§€ë³´ìˆ˜ì™€ í™•ì¥ì´ ìš©ì´.
- **ìœ ì—°ì„±**: ìƒˆë¡œìš´ ê¸°ëŠ¥ ì¶”ê°€ ì‹œ ë¦¬ìŠ¤ë„ˆë¥¼ ì¶”ê°€í•˜ëŠ” ë°©ì‹ìœ¼ë¡œ ì†ì‰½ê²Œ ê¸°ëŠ¥ í™•ì¥ì´ ê°€ëŠ¥.

### í•œê³„ì 
- **íŠ¸ëœì­ì…˜ ê´€ë¦¬ ë³µì¡ì„±**: ì´ë²¤íŠ¸ê°€ ë¹„ë™ê¸°ë¡œ ì²˜ë¦¬ë˜ë¯€ë¡œ íŠ¸ëœì­ì…˜ ì¼ê´€ì„±ì„ ìœ ì§€í•˜ê¸° ì–´ë ¤ìš¸ ìˆ˜ ìˆìŒ.
- **ì¶”ì  ì–´ë ¤ì›€**: ì´ë²¤íŠ¸ê°€ ì—¬ëŸ¬ ë¦¬ìŠ¤ë„ˆë¡œ ë¶„ì‚°ë˜ê¸° ë•Œë¬¸ì— ìƒíƒœ ì¶”ì ê³¼ ëª¨ë‹ˆí„°ë§ì´ í•„ìˆ˜ì ì„.

ì´ë²ˆì£¼ì°¨ì—ì„œëŠ” ì´ë²¤íŠ¸ ê¸°ë°˜ì˜ ì•„í‚¤í…ì²˜ë¥¼ í†µí•œ íŠ¸ëœì­ì…˜ ë¶„ë¦¬ë¥¼ ì‹¤ìŠµí•´ë³´ë ¤ í•œë‹¤.

### ì´ë²¤íŠ¸ ê¸°ë°˜ ì•„í‚¤í…ì²˜ êµ¬í˜„

ë¨¼ì € í˜„ì¬ ë‚˜ì˜ í”„ë¡œì íŠ¸ì—ì„œëŠ” ê²°ì œ usecase ë¥¼ ë³´ìë©´

1. concertBooking ì¡°íšŒ
2. concertSeat ì¡°íšŒ ë° ì˜ˆì•½ëœ ì¢Œì„ì¸ì§€ ì¡°íšŒ
3. user ê²°ì œ í¬ì¸íŠ¸ ì¡°íšŒ ë° ì‚¬ìš©
4. ëŒ€ê¸°ì—´ì‚­ì œ

ë“±ì˜ êµ¬ì¡°ë¡œ ì´ë£¨ì–´ì ¸ ìˆë‹¤.
ì´ ë„¤ê°œì˜ ê³¼ì •ì´ ëª¨ë†€ë¦¬ì‹ ì´ë¼ë©´, í•˜ë‚˜ì˜ íŠ¸ëœì­ì…˜ì— ë¬¶ì—¬ ì²˜ë¦¬ ëœ í›„ ì™„ë£Œ ë˜ê² ì§€ë§Œ,
ê°ê° MSA ë¼ê³  ê°€ì •í•˜ë©´ 1 -> 2-> 3-> 4 ì˜ ê³¼ì •ì„ ë„˜ì–´ ê°€ë©° ê°ê° ì •ë³´ë¥¼ ì „ë‹¬í•˜ì—¬ ì§„í–‰ì´ ë  ê²ƒì´ë‹¤.
í˜„ì¬ êµ¬ì¡°ì—ì„œëŠ” ëª¨ë“  íŠ¸ëœì­ì…˜ì´ ëë‚˜ê³ , ì™„ë£Œ ë˜ì—ˆë‹¤ëŠ” íˆìŠ¤í† ë¦¬ë¥¼ ì™¸ë¶€ë¡œ ì „ë‹¬ í•´ ì£¼ëŠ” ì‹¤ìŠµì„ í•´ë³¼ ìˆ˜ ìˆì„ ê²ƒê°™ë‹¤.

```java
@Transactional
public PaymentInfo.Output processPayment(PaymentInfo.Input input) {

    ConcertBooking concertBooking = concertRepository.getConcertBooking(input.concertBookingId());
    concertBooking.validConcertBookingStatus();

    ConcertSeat concertSeat = concertRepository.getConcertSeat(concertBooking.getConcertSeatId());
    User user = userRepository.findUserWithLockById(concertBooking.getUserId());

    user.usePoints(concertSeat.getPrice());

    Payment payment = paymentRepository.savePayment(concertBooking.getConcertBookingId(), concertSeat.getPrice());
    concertBooking.updateBookingStatusToCompleted();
    queueRepository.deleteProcessingToken(input.authorizationHeader().substring(7));
    paymentEventPublisher.success(new PaymentSuccessEvent(payment.getPaymentId(), payment.getConcertBookingId()));

    return new PaymentInfo.Output(payment.getPaymentId());
}

```
ê¸°ì¡´ ê²°ì œë¡œì§ì—ì„œ, ëª¨ë‘ ì™„ë£Œì‹œ ì´ë²¤íŠ¸ë¥¼ ë°œí–‰ì‹œí‚¤ëŠ” ë¡œì§ì„ ì¶”ê°€í•œë‹¤.

```java
package hhplus.booking.app.payment.application;

import lombok.RequiredArgsConstructor;
import org.springframework.context.ApplicationEventPublisher;
import org.springframework.stereotype.Component;

@Component
@RequiredArgsConstructor
public class PaymentEventPublisher {
    private final ApplicationEventPublisher applicationEventPublisher;

    public void success(PaymentSuccessEvent event) {
        applicationEventPublisher.publishEvent(event);
    }
}

```
ì„±ê³µì‹œ ì´ë²¤íŠ¸ë¥¼ ë°œí–‰ í•˜ë„ë¡ ì¶”ê°€í•œë‹¤.

```java
package hhplus.booking.app.payment.application;

import lombok.RequiredArgsConstructor;
import lombok.extern.slf4j.Slf4j;
import org.springframework.scheduling.annotation.Async;
import org.springframework.stereotype.Component;
import org.springframework.transaction.event.TransactionPhase;
import org.springframework.transaction.event.TransactionalEventListener;

@Slf4j
@Component
@RequiredArgsConstructor
public class PaymentEventListener {

    @Async
    @TransactionalEventListener(phase = TransactionPhase.AFTER_COMMIT)
    public void paymentSuccessHandler(PaymentSuccessEvent paymentSuccessevent) {
        log.info("ê²°ì œì™„ë£Œ!!! paymentId: {}, concertBookingId: {}", paymentSuccessevent.paymentId(), paymentSuccessevent.concertBookingId());
        log.info("========== ì™„ë£Œëœ ì •ë³´ë¥¼ ì „ë‹¬í•©ë‹ˆë‹¤.==========");
        log.info("========== ì „ë‹¬ì™„ë£Œ ==========");
    }
}

```
ì´ë²¤íŠ¸ê°€ ë°œí–‰ë˜ë©´, ë¦¬ìŠ¤ë„ˆê°€ ê·¸ë¥¼ ê°ì§€í•˜ê³  ì»¤ë°‹ì´í›„ì— ì™„ë£Œ ë˜ì—ˆë‹¤ëŠ” ì •ë³´ë¥¼ ë„˜ê¸°ê²Œ ëœë‹¤.

![img.png](docs/img/img.png)
